{"version":3,"sources":["strategy.js"],"names":["define","$","memoize","func","memo","term","callback","call","this","data","concat","apply","arguments","Strategy","options","extend","cache","search","parse","strategiesArray","params","map","strategy","strategyObj","el","$el","prototype","match","replace","id","context","index","template","obj","idProperty","fn","textcomplete"],"mappings":";;;;;;;AAAAA,QACE,iBACA,kBACA,SAAUC,GACV,aAGA,IAAIC,EAAU,SAAUC,GACtB,IAAIC,KACJ,OAAO,SAAUC,EAAMC,GACjBF,EAAKC,GACPC,EAASF,EAAKC,IAEdF,EAAKI,KAAKC,KAAMH,EAAM,SAAUI,GAC9BL,EAAKC,IAASD,EAAKC,QAAaK,OAAOD,GACvCH,EAASK,MAAM,KAAMC,eAM7B,SAASC,EAASC,GAChBb,EAAEc,OAAOP,KAAMM,GACXN,KAAKQ,QAASR,KAAKS,OAASf,EAAQM,KAAKS,SAG/CJ,EAASK,MAAQ,SAAUC,EAAiBC,GAC1C,OAAOnB,EAAEoB,IAAIF,EAAiB,SAAUG,GACtC,IAAIC,EAAc,IAAIV,EAASS,GAG/B,OAFAC,EAAYC,GAAKJ,EAAOI,GACxBD,EAAYE,IAAML,EAAOK,IAClBF,KAIXtB,EAAEc,OAAOF,EAASa,WAKhBC,MAAY,KACZC,QAAY,KACZX,OAAY,KAGZY,GAAY,KACZb,OAAY,EACZc,QAAY,WAAc,OAAO,GACjCC,MAAY,EACZC,SAAY,SAAUC,GAAO,OAAOA,GACpCC,WAAY,OAGdjC,EAAEkC,GAAGC,aAAavB,SAAWA","file":"../strategy.js","sourcesContent":["define([\n  \"skylark-jquery\",\n  \"./textcomplete\"\n],function ($) {\n  'use strict';\n\n  // Memoize a search function.\n  var memoize = function (func) {\n    var memo = {};\n    return function (term, callback) {\n      if (memo[term]) {\n        callback(memo[term]);\n      } else {\n        func.call(this, term, function (data) {\n          memo[term] = (memo[term] || []).concat(data);\n          callback.apply(null, arguments);\n        });\n      }\n    };\n  };\n\n  function Strategy(options) {\n    $.extend(this, options);\n    if (this.cache) { this.search = memoize(this.search); }\n  }\n\n  Strategy.parse = function (strategiesArray, params) {\n    return $.map(strategiesArray, function (strategy) {\n      var strategyObj = new Strategy(strategy);\n      strategyObj.el = params.el;\n      strategyObj.$el = params.$el;\n      return strategyObj;\n    });\n  };\n\n  $.extend(Strategy.prototype, {\n    // Public properties\n    // -----------------\n\n    // Required\n    match:      null,\n    replace:    null,\n    search:     null,\n\n    // Optional\n    id:         null,\n    cache:      false,\n    context:    function () { return true; },\n    index:      2,\n    template:   function (obj) { return obj; },\n    idProperty: null\n  });\n\n  $.fn.textcomplete.Strategy = Strategy;\n\n});\n"]}